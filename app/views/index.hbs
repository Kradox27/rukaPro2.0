<style>
    input:focus,
    input:active,
    button:focus,
    button:active {
        outline: none;
    }

    a {
        text-decoration: none;
    }

    a:focus,
    a:active {
        outline: none;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-weight: bold;
        letter-spacing: 1px;
        color: #ff6d18;
        -webkit-text-stroke: 0.25px white;
    }

    .login-container {
        height: 50%;
        position: relative;
        text-align: center;
    }

    .container:before {
        content: "";
        height: 100%;
        width: 0px;
        display: inline-block;
        vertical-align: middle;
    }

    .formBox {
        width: 460px;
        max-width: 100%;
        height: 552px;
        margin-left: -4px;
        margin-top: 50px;
        margin-bottom: 40px;
        position: relative;
        vertical-align: middle;
        display: inline-block;
    }

    .formBox .box {
        text-align: center;
        background-color: #fff;
        border-radius: 8px;
        position: absolute;
        width: 100%;
        height: 90%;
        box-shadow: 0px 2px 11px -2px rgba(0, 0, 0, 0.5);
        transition: all 0.2s cubic-bezier(0.35, 0.33, 0.75, 0.9);
    }

    .formBox p {
        font-size: 18px;
        line-height: 27px;
        margin-bottom: 30px;
        color: #696969;
    }

    .formBox form {
        display: block;
        padding: 0px 50px;
        position: relative;
    }

    .formBox .f_row {
        position: relative;
        margin-bottom: 20px;
        height: 50px;
    }

    .formBox .f_row.shake {
        animation: shake 0.4s linear;
    }

    .formBox .f_row.last {
        margin-bottom: 53px;
    }


    .formBox .f_row input {
        background-color: transparent;
        border: none;
        font-size: 19px;
        width: 100%;
        height: 118%;
    }

    .formBox .f_row u {
        background-color: #e1e1e1;
        width: 100%;
        height: 2px;
        position: absolute;
        left: 0;
        bottom: 0;
    }

    .formBox .f_row u:before {
        content: "";
        display: block;
        height: 100%;
        width: 0;
        background-color: #ff8037;
        transition: all 0.35s cubic-bezier(0.35, 0.33, 0.84, 0.85);
    }

    .formBox .f_row.focus label {
        opacity: 0.5;
        transform: translate(0px, -30px) scale(0.8);
    }

    .formBox .f_row.focus u:before {
        width: 100%;
    }

    .formBox .reg_bg {
        border-radius: 50%;
        background-color: #ed2553;
        position: absolute;
        width: 900px;
        height: 900px;
        right: -115px;
        top: -190px;
        transform-origin: 100% 40%;
        transform: scale(0);
    }

    .formBox .regTag {
        fill: #fff;
        width: 38px;
        height: 38px;
    }


    .formBox .forgetbox {
        background-color: #ff8037;
        overflow: hidden;
        opacity: 0;
        visibility: hidden;
        transform: translate(0px, 9px) scale(1.03);
        padding-top: 78px;
    }

    .formBox .forgetbox .back {
        position: absolute;
        top: 13px;
        left: 26px;
        color: #fff;
        font-size: 32px;
        font-weight: bold;
        animation: back 0.8s linear;
        animation-iteration-count: infinite;
    }

    .formBox .forgetbox .back {
        fill: #fff;
        width: 20px;
        height: 20px;
    }

    .formBox .forgetbox .f_row label,
    .formBox .forgetbox .f_row input {
        color: #fff;
    }

    .formBox .forgetbox .f_row u {
        background-color: #7dc6dc;
    }

    .formBox .forgetbox .f_row u:before {
        background-color: #fff;
    }

    .formBox .forgetbox .f_row.last {
        margin-bottom: 40px;
    }

    .formBox .forgetbox .btn u {
        background-color: #7dc6dc;
    }

    .formBox .forgetbox h2 {
        color: #fff;
        border-left-color: #fff;
        visibility: hidden;
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.48, 0.55, 0.69, 0.9);
        transform: translate(-20px, 0px);
    }

    .formBox .forgetbox .form>div {
        visibility: hidden;
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.48, 0.55, 0.69, 0.9);
        transform: translate(0px, 20px);
        transition-delay: 0.15s;
    }

    .formBox .forgetbox p {
        color: #fff;
        visibility: hidden;
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.48, 0.55, 0.69, 0.9);
        transform: translate(0px, 20px);
        transition-delay: 0.2s;
    }

    .formBox.level-login .boxShaddow {
        opacity: 0.7;
        transform-origin: center top;
        transform: translate(0px, -9px) scale(0.97);
    }

    .formBox.level-reg h2 {
        border-left-color: #fff;
        color: #fff;
    }

    .formBox.level-reg .boxShaddow {
        opacity: 0.7;
        transform-origin: center top;
        transform: translate(0px, -18px) scale(0.94);
    }

    .formBox.level-reg .loginBox {
        opacity: 0.7;
        transform-origin: center top;
        transform: translate(0px, -9px) scale(0.97);
    }

    .formBox.level-reg .regTag {
        animation: regTag 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78), regTag2 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78);
        animation-fill-mode: forwards;
    }

    .formBox.level-reg .reg_bg {
        animation: regMask 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78);
        animation-fill-mode: forwards;
    }

    .formBox.level-reg .form>div,
    .formBox.level-reg .btn-large,
    .formBox.level-reg h2 {
        visibility: visible;
        opacity: 1;
        transform: translateX(0px);
    }

    .formBox.level-reg-revers .regTag {
        animation: regTagR 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78), regTag2R 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78);
        animation-fill-mode: forwards;
    }

    .formBox.level-reg-revers .reg_bg {
        animation: regMaskR 0.3s cubic-bezier(0.48, 0.55, 0.73, 0.78);
        animation-fill-mode: forwards;
    }

    .formBox.level-forget .boxShaddow {
        opacity: 0.7;
        transform-origin: center top;
        transform: translate(0px, -18px) scale(0.94);
    }

    .formBox.level-forget .loginBox {
        opacity: 0.7;
        transform-origin: center top;
        transform: translate(0px, -9px) scale(0.97);
    }

    .formBox.level-forget .forgetbox {
        transform: translate(0px, 0px) scale(1);
        opacity: 1;
        visibility: visible;
    }

    .formBox.level-forget .forgetbox p,
    .formBox.level-forget .forgetbox form>div,
    .formBox.level-forget .forgetbox .btn,
    .formBox.level-forget .forgetbox h2 {
        visibility: visible;
        opacity: 1;
        transform: translate(0px, 0px);
    }

    @keyframes back {
        0% {
            transform: translateX(0px);
        }

        70% {
            transform: translateX(-13px);
        }

        100% {
            transform: translateX(0px);
        }
    }

    @keyframes regMask {
        0% {
            transform: translate(0px, 0px) scale(0);
        }

        50% {
            transform: translate(100px, 100px) scale(0.5);
        }

        100% {
            transform: translate(0px, 0px) scale(1);
        }
    }

    @keyframes regMaskR {
        0% {
            transform: translate(0px, 0px) scale(1);
        }

        50% {
            transform: translate(150px, -150px) scale(0.5);
        }

        100% {
            transform: translate(0px, 0px) scale(0);
        }
    }

    @keyframes regTag {
        0% {
            transform: translate(0px, 0px) rotate(0deg);
        }

        25% {
            transform: translate(4px, 25px) rotate(11.25deg);
        }

        50% {
            transform: translate(-88px, 40px) rotate(22.5deg);
        }

        100% {
            transform: translate(-96px, 8px) rotate(45deg);
        }
    }

    @keyframes regTag2 {
        0% {
            width: 140px;
            height: 140px;
            line-height: 140px;
            box-shadow: 0px 2px 5px -1px rgba(0, 0, 0, 0.45);
        }

        100% {
            width: 70px;
            height: 70px;
            box-shadow: 0px 2px 5px -1px rgba(0, 0, 0, 0);
            line-height: 68px;
        }
    }

    @keyframes regTagR {
        0% {
            transform: translate(-96px, 8px) rotate(45deg);
        }

        25% {
            transform: translate(-88px, 40px) rotate(22.5deg);
        }

        50% {
            transform: translate(4px, 25px) rotate(11.25deg);
        }

        100% {
            transform: translate(0px, 0px) rotate(0deg);
        }
    }

    @keyframes regTag2R {
        0% {
            width: 70px;
            height: 70px;
            box-shadow: 0px 2px 5px -1px rgba(0, 0, 0, 0);
            line-height: 68px;
        }

        100% {
            width: 140px;
            height: 140px;
            line-height: 140px;
            box-shadow: 0px 2px 5px -1px rgba(0, 0, 0, 0.45);
        }
    }

    @keyframes shake {

        from,
        to {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
        }

        10%,
        30%,
        50%,
        70%,
        90% {
            -webkit-transform: translate3d(-10px, 0, 0);
            transform: translate3d(-10px, 0, 0);
        }

        20%,
        40%,
        60%,
        80% {
            -webkit-transform: translate3d(10px, 0, 0);
            transform: translate3d(10px, 0, 0);
        }
    }

    .f_link {
        text-align: center;
        padding-top: 12px;
        padding-bottom: 20px;
    }

    .f_link a {
        color: #bdbdbd;
        font-size: 23px;
        transition: all 0.6s ease;
    }

    .f_link a:hover {
        color: #ff8037;
    }

    a span {
        position: absolute;
        display: block;
        margin: 12% 26%;
        -webkit-transform: translateX(0);
        transform: translateX(0);
        -webkit-transition: 0.5s;
        transition: 0.5s;
        color: white;
    }

    .reg {
        position: absolute;
        top: 0;
        left: 0;
        -webkit-transform: translateY(-100%) scale(1);
        transform: translateY(-100%) scale(1);
        display: block;
        width: 20px;
        height: 20px;
        border-radius: 50px;
        z-index: 5;
        -webkit-transition: 0.8s ease-in-out;
        transition: 0.8s ease-in-out;
    }

    ul {
        list-style: none;
        padding: 0;
        margin: 0;
        float: left;
    }

    li {
        text-align: left;
    }

    body {
        background-image: url('/imagenes/background1.jpeg');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
    }

    #show_password:hover {
        color: #F95B00;
    }

    .showPassword {
        position: relative;
        top: -66%;
        left: 45%;
    }

    .efecto {
        -webkit-transition: all .9s ease;
        /* Safari y Chrome */
        -moz-transition: all .9s ease;
        /* Firefox */
        -o-transition: all .9s ease;
        /* IE 9 */
        -ms-transition: all .9s ease;
        /* Opera */
    }

    .efecto:hover {
        -webkit-transform: scale(1.2);
        -moz-transform: scale(1.2);
        -ms-transform: scale(1.2);
        -o-transform: scale(1.2);
        transform: scale(1.2);
    }
</style>

<div class="container login-container">
    <div class="row vh-100 justify-content-around align-items-center">
        <div class="col-sm-7">
            <div class="card mb-3">
                <div class="card-body">
                    <h3>Bienvenido a RukaPro</h3>
                    <h5>¿Como desea Ingresar?</h5><br><br>
                    <ul>
                        <li class="text-RukaPro"><i class='icon-checkmark4 text-RukaPro fa-lg'></i>
                            <strong>&nbsp;&nbsp;&nbsp;Residente:</strong>
                        </li>
                        <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            Resumen Rol, si no tiene cuenta registrarse <a href="/registrarUsuario"
                                class="text-RukaPro"><strong>AQUÍ</strong></a>
                        </li><br>
                        <li class="text-RukaPro"><i class='icon-checkmark4 text-RukaPro fa-lg'></i>
                            <strong>&nbsp;&nbsp;&nbsp;Comité:</strong>
                        </li>
                        <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            Resumen Rol, si no tiene cuenta contrate <a href="/solicitudServicio"
                                class="text-RukaPro"><strong>AQUÍ</strong></a>
                        </li><br>
                        <li class="text-RukaPro"><i class='icon-checkmark4 text-RukaPro fa-lg'></i>
                            <strong>&nbsp;&nbsp;&nbsp;Administrador:</strong>
                        </li>
                        <li class="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            Resumen Rol, si no tiene cuenta contrate <a href="/solicitudServicio"
                                class="text-RukaPro"><strong>AQUÍ</strong></a>
                        </li><br>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-sm-5">
            <div class="formBox level-login">
                <div class="box boxShaddow"></div>
                <div class="box loginBox">
                    <div>
                        <img src="/imagenes/RukaPro_Solo_naranjo.png" alt="Logo rukaPRO"
                            style="width: 80px; height: 80px" class="card-img-top mx-auto m-2">
                        <h2>Iniciar Sesión</h2>
                    </div>
                    <form id="form-login">
                        <div class="f_row">
                            <select id="comboLogin" name="codigoRol" style="width:100%;"></select>
                        </div>
                        <div class="f_row">
                            <input type="text" name="usuario" class="input-field holderRukaPro holderCenter"
                                placeholder="Correo Electrónico" value="{{correo}}" required>
                            <u></u>
                        </div>
                        <div class="f_row">
                            <input id="txtPassword" type="password" name="password"
                                class="input-field holderRukaPro holderCenter" placeholder="Contraseña" required>
                            <u></u>
                            <label for="show_password" class="showPassword">
                                <span id="show_password" class="icon-eye-blocked text-RukaPro"></span>
                            </label>
                        </div>
                        <button id="btnLogin" type="button" class="btn btn-lg bg-RukaPro efecto"
                            style="box-shadow: 2px 2px 5px #999;">Ingresar</button>
                        <div class="f_link">
                            <a href="" class="resetTag">¿Olvidaste tu contraseña?</a>
                        </div>
                    </form>
                </div>
                <div class="box forgetbox">
                    <a href="#" class="back icon-back"><i class="icon-arrow-left8"></i> </a>
                    <h2>Cambiar Contraseña</h2>
                    <form id="form-pass">
                        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum
                            has been the industry's standard dummy text ever since the 1500s, </p>
                        <div class="f_row last">
                            <input type="text" name="usuarioPass" class="input-field holderBlanco holderCenter"
                                placeholder="Correo Electrónico" required>
                            <u></u>
                        </div>
                        <button id="btnPass" type="button" class="btn btn-lg bg-white text-RukaPro efecto"
                            style="box-shadow: 2px 2px 5px rgb(255, 255, 255);">Recuperar Contraseña</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



<script nonce="{{nonce}}">

    $(document).ready(function () { loginSelect2N("#comboLogin", "", '{{tipo}}'); });

    $(".input-field").on("blur", function () {
        if (!this.value) $(this).parent(".f_row").removeClass("focus");
        else $(this).parent(".f_row").addClass("focus");
    }).on("focus", function () {
        $(this).parent(".f_row").addClass("focus");
        $(".btn").removeClass("active");
        $(".f_row").removeClass("shake");
    });

    $(".resetTag").click(function (e) {
        e.preventDefault();
        $(".formBox").addClass("level-forget").removeClass("level-reg");
    });

    $(".back").click(function (e) {
        e.preventDefault();
        $(".formBox").removeClass("level-forget").addClass("level-login");
    });

    $(".regTag").click(function (e) {
        e.preventDefault();
        $(".formBox").removeClass("level-reg-revers");
        $(".formBox").toggleClass("level-login").toggleClass("level-reg");
        if (!$(".formBox").hasClass("level-reg")) $(".formBox").addClass("level-reg-revers");
    });

    $('#btnLogin').on('click', function (e) {
        let validar = true;
        if ($('input[name="usuario"]').val() == "") {
            validar = false;
            toastr.warning('Ingrese un Usuario.');
            $(".f_row").addClass("shake");
        }
        if ($('input[name="password"]').val() == "") {
            validar = false;
            toastr.warning('Ingrese una Contraseña.');
            $(".f_row").addClass("shake");
        }
        if (validar) {
            $.ajax({
                method: "POST",
                url: "/login",
                dataType: 'json',
                data: $('#form-login').serialize(),
            })
                .done((respuesta) => {
                    window.location.replace(respuesta.url)
                })
                .fail((jqXHR, textStatus, errorThrown) => {
                    Swal.close();
                    Swal.fire('Intente Nuevamente.', errorMessage(jqXHR, textStatus, errorThrown), 'error')
                });
        }
    })

    $("#show_password").click(function () {
        var cambio = document.getElementById("txtPassword");
        if (cambio.type == "password") {
            cambio.type = "text";
            $(this).removeClass('icon-eye-blocked').addClass('icon-eye');
            cambio.focus();
        } else {
            cambio.type = "password";
            $(this).removeClass('icon-eye').addClass('icon-eye-blocked');
            cambio.focus();
        }
    });

    $('#btnPass').on('click', function (e) {
        let validar = true;
        if ($('input[name="usuarioPass"]').val() == "") {
            validar = false;
            toastr.warning('Ingrese un Correo para recuperar contraseña.');
            $(".f_row").addClass("shake");
        }
        if (!validarEmail($('input[name="usuarioPass"]').val())) {
            validar = false;
            toastr.warning('Ingrese un correo valido.');
            $(".f_row").addClass("shake");
        }

        if (validar) {
            $.ajax({
                method: "POST",
                url: "/solicitudRecuperacionPass",
                dataType: 'json',
                data: $('#form-pass').serialize(),
            })
                .done((resp) => {
                    if (resp.ok) {
                        Swal.fire({
                            title: "Solicitud Enviada",
                            showConfirmButton: false,
                            footer: '<a href="/">Volver</a>',
                            html: `
                                <div>
                                    <p>Se ha enviado un correo a ${resp.ok} para recuperar su contraseña.</p>
                                    <p>Timpo Restante:</p>
                                    <strong><p id="temporizador"></p></strong>
                                </div>
                            `
                        })
                        temporizador("#temporizador", 30)
                    };
                    if (resp.error) toastr.warning(resp.error);
                })
                .fail((jqXHR, textStatus, errorThrown) => {
                    Swal.close();
                    Swal.fire('Intente Nuevamente.', errorMessage(jqXHR, textStatus, errorThrown), 'error')
                });
        }
    })

</script>